/*
 * 010i2c_master_tx_testing.c
 *
 *  Created on: Feb 24, 2019
 *      Author: admin
 */

#include "stm32f407xx.h"

TIM_HandleTypeDef htim;

void delay()
{
	for (uint32_t i = 0; i < 500000; i++);
}


int main(void){
	TIM_PWM_Init(TIM2, TIM_CHANNEL_1);
	uint16_t duty_cycle = 0;
	uint16_t step = 100;


	while(1){
		TIM_ConfigTimeBase(TIM2, 16, 999, duty_cycle, TIM_CHANNEL_1);
		duty_cycle += step;
		if(duty_cycle >= 999){
			step -= 100;
			duty_cycle = 999;
		}else if (duty_cycle <= 0){
			duty_cycle = 0;
			step += 100;
		}
		delay();

	}
}


