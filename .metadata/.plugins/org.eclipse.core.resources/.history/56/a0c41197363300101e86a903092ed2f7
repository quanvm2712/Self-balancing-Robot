/*
 * 010i2c_master_tx_testing.c
 *
 *  Created on: Feb 24, 2019
 *      Author: admin
 */

#include "stm32f407xx.h"

TIM_HandleTypeDef htim;

void delay()
{
	for (uint32_t i = 0; i < 500000; i++);
}

void EXTI0_IRQHandler(){
	EXTI->PR |= (1 << 0); //Clear PR bit to reset interrupt line
	GPIO_TogglePin(GPIOA, GPIO_PIN_0);
}


int main(void){
    //TIM_PWM_Init(TIM2, TIM_CHANNEL_1);
    //Initialize Systick, so each tick is 1ms
    SysTick_Init();

    //Initialize GPIO output for LED
    GPIO_Initialize(GPIOA, GPIO_PIN_0, GPIO_MODE_OUTPUT);

//    //Initialize GPIO input for button
//    GPIO_Initialize(GPIOD, GPIO_PIN_0, GPIO_MODE_IT_RISING);
//    //Enable interrupt for GPIOD Pin 0
//    GPIO_IRQInterruptConfig(IRQ_NO_EXTI0, ENABLE);

    SPI_Initialize(SPI1, SPI_MODE_MASTER, SPI_POLARITY_HIGH, SPI_PHASE_1stEDGE,
		   SPI_LSBFIRST, SPI_DATASIZE_8BIT, TRUE);

    uint8_t SPI_Data[2] = {0xFF, 0X0F);

    while(1){
      GPIO_TogglePin(GPIOA, GPIO_PIN_0);
      SPI_Transmit(SPI1, pTxBuffer, Len)
      Delay_ms(500);
    }
}


