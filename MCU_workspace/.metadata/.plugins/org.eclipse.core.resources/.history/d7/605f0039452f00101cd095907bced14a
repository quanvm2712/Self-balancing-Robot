/*
 * 010i2c_master_tx_testing.c
 *
 *  Created on: Feb 24, 2019
 *      Author: admin
 */

#include "stm32f407xx.h"

//USART_HandleTypeDef USART2_Handle;
//char msg[1024] = "UART Tx testing...\n";
//
//void delay(void)
//{
//	for(uint32_t i = 0 ; i < 500000/2 ; i ++);
//}
//
//
//
//int main(void)
//{
//	//Init USART Parameter
//	memset(&USART2_Handle, 0, sizeof(USART2_Handle));
////	USART_InitGPIO(USART2);
////	USART2_Inits();
//	USART_SetParam(&USART2_Handle, USART2, USART_MODE_TX, USART_STOPBITS_1, USART_WORDLENGTH_8BITS, USART_PARITY_NONE, USART_BAUDRATE_9600);
//
//
//	USART_PeripheralControl(USART2, ENABLE);
//
//	while (1)
//	{
//		USART_Transmit(&USART2_Handle,(uint8_t*)msg,strlen(msg));
//		delay();
//
//	}
//
//}



/********************************************************************************/
USART_HandleTypeDef USART2_Handle;  //USART2 Handler for Asynchronous RX function

GPIO_HandleTypeDef GPIOA_Handle;

char rData[2]; //Array to store received data

void delay(void)
{
	for(uint32_t i = 0 ; i < 500000/2 ; i ++);
}


void GPIO_Initialize(void){
	GPIOB_Handle.Init.Pin = 13;
	GPIOB_Handle.Init.Mode = GPIO_MODE_OUTPUT;
	GPIOB_Handle.Init.OPType = GPIO_OPTYPE_PP;
	GPIO_Init(&GPIOB_Handle);
}

int main(void){
	//Init UART Parameters
	//USART_SetParam(&USART2_Handle, USART2, USART_MODE_RX, USART_STOPBITS_1, USART_WORDLENGTH_8BITS, USART_PARITY_NONE, 9600);

	//Init SysTick timer
	SysTick_Init();
	GPIO_Initialize();


	while(1){
		//USART_Receive(&USART2_Handle, (uint8_t*) rData, 2);
		//delay();

		GPIO_TogglePin(GPIOB, GPIO_PIN_13);
		Delay_ms(1000);

	}

	return 0;
}
